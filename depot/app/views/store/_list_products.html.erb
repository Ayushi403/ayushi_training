<% cat_list = @categories %>
<div id='category_field'>
	<% if cat_list.present? %>
	<%# sub_cat_list = cat_list.sub_categories %>
	<% end %>
	<h3>Catagory</h3>
	<select id="category_list">
		<option value="" selected="true"></option>
		<%if cat_list.present? %>
		<% cat_list.each do |cat| %>
		<option value='<%=cat.id%>'><%=cat.name%></option>

		<% end %>
		<% end %>
	</select>

	<%if cat_list.present? %>
	<% cat_list.each do |cat| %>
	<div style="display:none;" class= "cat_div"id = "sub_cat<%=cat.id%>">
		<h3>Sub Catagory</h3>
		<select id="sub_category_list">
		<option value="" selected="true"></option>
			<% if cat.sub_categories.present? %>
			<% cat.sub_categories.each do |sub_cat| %>
			<option value='<%= sub_cat.id %>'> <%=sub_cat.name%></option>			
			<% end %>
			<% end %>
		</select>
	</div>
	<% end %>
	<% end %>

</div>


<br />

<div class = "cat_all" id = "cat_sel">
	<%= render 'index',remote: true%>
	</div>



<script type="text/javascript">

	$('#category_list').change(function(){
	//$('.sub_cat_section').hide();
	var cat_id = $(this).find("option:selected").val();
	var sub_cat_id = "sub_cat" + cat_id;

	var cat_filter_id = "cat_sel" + cat_id;
	$(".cat_div").hide();
	$("#"+sub_cat_id).show();
  //$(".cat_all").hide();
	//$("#"+cat_filter_id).show();
  $.ajax({
    url: '/',
    //type: "GET",
    data: {cat_id: $(this).find("option:selected").val()},
    dataType : 'script'
  });
});

	$('.cat_div').change(function(){
		//var sub_cat_id = $('#sub_category_list').val();
		var cat_id = $('#category_list').find("option:selected").val();
		var sub_cat_id = "sub_cat" + cat_id;
		var sub_cat_val = $("#"+sub_cat_id).find("option:selected").val();
		//$("#add_product").show();
		//$("#product_sub_category_id").val(sub_cat_val);
	});

	$('.cat_div').change(function(){
  $.ajax({
    url: '/',
   // type: "GET",
    data: {sub_cat_id: $(this).find("option:selected").val(),cat_id: $('#category_list').find("option:selected").val()},
    dataType : 'script'
  });
});

</script>

